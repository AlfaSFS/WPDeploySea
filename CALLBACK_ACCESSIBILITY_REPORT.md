# üîç –û—Ç—á–µ—Ç –æ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Callback URL

## üìã **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ callback URL**

-  **URL**: `https://seafarer-cv.com/api/payments/callback`
-  **–ú–µ—Ç–æ–¥**: POST
-  **–ü—Ä–æ—Ç–æ–∫–æ–ª**: HTTPS (TLS 1.3)
-  **–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**: Cloudflare Origin CA (–≤–∞–ª–∏–¥–Ω—ã–π)

## ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

### 1. **–ë–∞–∑–æ–≤–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**

-  ‚úÖ **HTTPS –¥–æ—Å—Ç—É–ø–µ–Ω** - —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–Ω—ã–π
-  ‚úÖ **DNS —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è** - –¥–æ–º–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
-  ‚úÖ **–°–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç** - HTTP 200/400 (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
-  ‚úÖ **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞** - ~0.18 —Å–µ–∫—É–Ω–¥—ã (–æ—Ç–ª–∏—á–Ω–æ)

### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö**

-  ‚úÖ **JSON –¥–∞–Ω–Ω—ã–µ** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å—è—Ç—Å—è
-  ‚úÖ **URL-encoded –¥–∞–Ω–Ω—ã–µ** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
-  ‚úÖ **–ü—É—Å—Ç—ã–µ callback'–∏** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º)
-  ‚úÖ **–ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏** - –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π 400

### 3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è**

-  ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
-  ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
-  ‚úÖ **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –æ—Ç WayForPay
-  ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –±–µ–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å WayForPay**

-  ‚úÖ **–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞** - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ WayForPay
-  ‚úÖ **HTTP —Å—Ç–∞—Ç—É—Å—ã** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ (200 –¥–ª—è —É—Å–ø–µ—Ö–∞, 400 –¥–ª—è –æ—à–∏–±–æ–∫)
-  ‚úÖ **Content-Type** - application/json
-  ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–∞–ª–∏–¥–Ω—ã–π JSON

## üöÄ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ**

### ‚úÖ **Callback URL –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å WayForPay**

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–ü—Ä–∏–µ–º callback'–æ–≤** - —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –æ—Ç WayForPay
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
4. **–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–µ–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–æ—Å—å:**

-  ‚úÖ –ü—É—Å—Ç—ã–µ callback'–∏ (—Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º WayForPay)
-  ‚úÖ –í–∞–ª–∏–¥–Ω—ã–µ callback'–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å—å—é
-  ‚úÖ –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ callback'–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å—å—é
-  ‚úÖ –†–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö (JSON, URL-encoded)
-  ‚úÖ –†–∞–∑–ª–∏—á–Ω—ã–µ User-Agent'—ã (–≤–∫–ª—é—á–∞—è WayForPay)

## üìä **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏**

### **–°–µ—Ä–≤–µ—Ä–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

-  **Nginx**: Reverse proxy —Å SSL termination
-  **Backend**: Node.js/Express —Å CORS
-  **SSL**: Cloudflare Origin CA —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
-  **CDN**: Cloudflare (—É–ª—É—á—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ callback'–æ–≤:**

```javascript
// –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –¥–ª—è WayForPay
{
  "orderReference": "order_id",
  "status": "accept", // –∏–ª–∏ "reject"
  "time": 1757237022,
  "signature": "generated_signature"
}
```

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

-  HMAC-MD5 –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
-  –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
-  –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∞—Ö
-  CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è WayForPay

## üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

### **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ callback URL
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫
3. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - —É–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ –±—ç–∫–∞–ø–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ callback URL

### **–î–ª—è –æ—Ç–ª–∞–¥–∫–∏:**

1. **–õ–æ–≥–∏ backend** - `docker-compose logs backend`
2. **–õ–æ–≥–∏ Nginx** - `docker-compose logs nginx`
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞** - `curl -s https://seafarer-cv.com/api/health`

## üéâ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ**

**Callback URL `https://seafarer-cv.com/api/payments/callback` –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫
—Ä–∞–±–æ—Ç–µ —Å WayForPay.**

–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ, —Å–µ—Ä–≤–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç
WayForPay –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤
–ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

---

_–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2025-09-07_  
_–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ_
