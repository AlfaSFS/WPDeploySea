# üîç –ê–Ω–∞–ª–∏–∑: –ü–æ—á–µ–º—É –∑–∞–∫–∞–∑—ã –Ω–µ –≤–∏–¥–Ω—ã –≤ –∫–∞–±–∏–Ω–µ—Ç–µ

## üìã –ü—Ä–æ–±–ª–µ–º–∞:

–ó–∞–∫–∞–∑—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–∞—à API (`/api/orders`), –Ω–æ –Ω–µ –≤–∏–¥–Ω—ã –≤ WordPress
–∫–∞–±–∏–Ω–µ—Ç–µ.

## üîç –ü—Ä–∏—á–∏–Ω–∞:

–ó–∞–∫–∞–∑—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è **—Ç–æ–ª—å–∫–æ –≤ –±–∞–∑–µ `orders_production`**, –Ω–æ **–ù–ï
—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å WordPress**.

### –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

```
Frontend ‚Üí /api/orders ‚Üí orders_production DB
                ‚Üì
         WordPress DB (–æ—Ç–¥–µ–ª—å–Ω–æ)
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. **–ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è** —á–µ—Ä–µ–∑ `/api/orders` ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `orders_production`
2. **WayForPay –∫–æ–ª–ª–±–µ–∫** –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ `orders_production`
3. **WordPress –∫–∞–±–∏–Ω–µ—Ç** —Å–º–æ—Ç—Ä–∏—Ç –≤ `wp_production` ‚Üí –∑–∞–∫–∞–∑–æ–≤ –Ω–µ—Ç

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç:

### 1. –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```json
{
   "id": "fc07b57b-9db4-4dfa-ac18-4a05d514ef95",
   "status": "pending",
   "total_amount": 1,
   "currency": "EUR"
}
```

### 2. PROD —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç–∞–µ—Ç:

-  **–í–∞–ª—é—Ç–∞:** `EUR` ‚úÖ
-  **–°—É–º–º–∞:** `1.00` ‚úÖ (–±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)
-  **–ú–µ—Ä—á–∞–Ω—Ç:** `test_test17` ‚úÖ

### 3. –°–∏–º—É–ª—è—Ü–∏—è —É—Å–ø–µ—Ö–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```json
{
   "status": "paid",
   "total_amount": 1,
   "currency": "EUR",
   "is_paid": true
}
```

## üéØ –†–µ—à–µ–Ω–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WordPress

–î–æ–±–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –≤ WordPress —á–µ—Ä–µ–∑ WooCommerce API:

```javascript
// –í backend/src/index.js –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞
const wpOrder = await createWordPressOrder({
   customer_email: email,
   total: total_amount,
   currency: currency,
   // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç

–°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ `orders_production`:

```javascript
// –ù–æ–≤—ã–π endpoint
app.get("/api/admin/orders", async (req, res) => {
   const orders = await getPool().query(
      "SELECT * FROM orders ORDER BY created_at DESC"
   );
   res.json(orders);
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

–î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∑–∞–∫–∞–∑–æ–≤ –º–µ–∂–¥—É –±–∞–∑–∞–º–∏:

```javascript
// –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞
await syncOrderToWordPress(orderId, newStatus);
```

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

-  **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤** —á–µ—Ä–µ–∑ API
-  **WayForPay –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** (PROD —Ä–µ–∂–∏–º)
-  **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–ª–ª–±–µ–∫–æ–≤** (Declined/Success)
-  **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ª–æ–≥–∏** —Å —è–∫–æ—Ä—è–º–∏
-  **–ê—É–¥–∏—Ç –ø–ª–∞—Ç–µ–∂–µ–π** –≤ `payments_wfp`

### ‚ö†Ô∏è –ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

-  **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ WordPress –∫–∞–±–∏–Ω–µ—Ç–µ**
-  **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å WooCommerce**

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞** –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

1. **–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∞–¥–º–∏–Ω-–∫–∞–±–∏–Ω–µ—Ç –¥–ª—è –∑–∞–∫–∞–∑–æ–≤
2. **–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å WordPress/WooCommerce
3. **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã –≤ WordPress, –Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑
   –Ω–∞—à API

---

**–í—ã–≤–æ–¥:** WayForPay –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤
–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ.
