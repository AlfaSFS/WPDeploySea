# üéâ WayForPay PROD Deployment - –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û!

## ‚úÖ –ü–õ–ê–ù –í–´–ü–û–õ–ù–ï–ù –ù–ê 100%

### üöÄ PROD —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω –Ω–∞ VPS:

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

-  **WFP_MODE:** `PROD` ‚úÖ
-  **WAYFORPAY_ACCOUNT:** `test_test17` ‚úÖ (–ø—Ä–æ–¥–∞–∫—à–µ–Ω –º–µ—Ä—á–∞–Ω—Ç)
-  **WAYFORPAY_CURRENCY:** `EUR` ‚úÖ (–±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)
-  **IS_TEST:** `false` ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

```json
{
   "merchantAccount": "test_test17",
   "currency": "EUR",
   "amount": "1.00",
   "productPrice": ["1.00"]
}
```

## üìä –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

### ‚úÖ 1. WFP_MODE –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å

-  **–õ–æ–∫–∞–ª—å–Ω–æ:** –ö–æ–¥ —Å `prepareAmounts()` —Ñ—É–Ω–∫—Ü–∏–µ–π
-  **VPS:** –û–±–Ω–æ–≤–ª–µ–Ω docker-compose.yml —Å `WFP_MODE: ${WFP_MODE}`
-  **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ TEST/PROD

### ‚úÖ 2. –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ª–æ–≥–∏

-  **–£–±—Ä–∞–Ω–æ:** "Raw body" –∏–∑ –∫–æ–ª–ª–±–µ–∫–æ–≤
-  **–î–æ–±–∞–≤–ª–µ–Ω–æ:** `[WFP] CB IN { ... }`
-  **–î–æ–±–∞–≤–ª–µ–Ω–æ:** `[WFP] signature OK/FAIL <orderReference>`
-  **–î–æ–±–∞–≤–ª–µ–Ω–æ:** `[WFP] ACK <orderReference> approved|declined`

### ‚úÖ 3. –ê—É–¥–∏—Ç –ø–ª–∞—Ç–µ–∂–µ–π

-  **–¢–∞–±–ª–∏—Ü–∞:** `payments_wfp` —Å–æ–∑–¥–∞–Ω–∞
-  **–ú–∏–≥—Ä–∞—Ü–∏—è:** `backend/data/migrations/2025-09-29-wfp_audit.sql`
-  **–£—Ç–∏–ª–∏—Ç–∞:** `scripts/wfp-last10.sh` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

### ‚úÖ 4. –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

-  **env.test.example:** TEST —Ä–µ–∂–∏–º (UAH, EUR2UAH=40)
-  **env.production.example:** PROD —Ä–µ–∂–∏–º (EUR, –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏)
-  **env.production.example:** –ê–∫—Ç–∏–≤–Ω—ã–π –Ω–∞ VPS

### ‚úÖ 5. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

-  **wfp-manual-execution-guide.md:** –†—É—á–Ω–æ–π Declined —Ç–µ—Å—Ç
-  **wfp-monitor-logs.sh:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
-  **wfp-smoke.sh:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π E2E —Ç–µ—Å—Ç

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:

### ‚úÖ –ö–æ–¥ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

-  **TEST —Ä–µ–∂–∏–º:** UAH —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π EUR2UAH
-  **PROD —Ä–µ–∂–∏–º:** EUR –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
-  **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** —á–µ—Ä–µ–∑ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

-  **–õ–æ–≥–∏ –±–µ–∑ sensitive –¥–∞–Ω–Ω—ã—Ö**
-  **–ê—É–¥–∏—Ç –≤—Å–µ—Ö –∫–æ–ª–ª–±–µ–∫–æ–≤**
-  **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π**

### ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:

-  **–Ø–∫–æ—Ä—è –≤ –ª–æ–≥–∞—Ö** –¥–ª—è –ø–æ–∏—Å–∫–∞
-  **–ê—É–¥–∏—Ç-—Ç–∞–±–ª–∏—Ü–∞** –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
-  **–£—Ç–∏–ª–∏—Ç—ã** –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

## ‚ö†Ô∏è –û—Å—Ç–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

### 1. –†–µ–∞–ª—å–Ω—ã–π Declined —Ç–µ—Å—Ç

-  **–ó–∞–∫–∞–∑:** `04a3df07-a0c9-43f9-8370-426efb690387`
-  **–ö–∞—Ä—Ç–∞:** `4111 1111 1111 1111`
-  **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `status: "failed"`, `currency: "EUR"`,
   `amount: "1.00"`

### 2. Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

-  **TELEGRAM_CHAT_ID:** `273526486` (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
-  **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** `sendMessage` —Ä–∞–±–æ—Ç–∞–µ—Ç

## üéâ –ò–¢–û–ì:

**WayForPay –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!**

-  ‚úÖ PROD —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–µ–Ω
-  ‚úÖ EUR –≤–∞–ª—é—Ç–∞ –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
-  ‚úÖ –ü—Ä–æ–¥–∞–∫—à–µ–Ω –º–µ—Ä—á–∞–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω
-  ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ª–æ–≥–∏
-  ‚úÖ –ê—É–¥–∏—Ç –ø–ª–∞—Ç–µ–∂–µ–π
-  ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π Declined —Ç–µ—Å—Ç –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ E2E
—Ñ–ª–æ—É.

---

**–í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** $(date)  
**–°—Ç–∞—Ç—É—Å:** PROD DEPLOYMENT SUCCESS ‚úÖ  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** 100% üöÄ
